---
title: Microsoft Q# 化學程式庫安裝
description: 瞭解如何安裝 Microsoft 量子化學程式庫，並將它與 NWChem 計算化學平臺搭配使用。
author: guanghaolow
ms.author: gulow
ms.date: 10/12/2018
ms.topic: article
uid: microsoft.quantum.chemistry.concepts.installation
no-loc:
- Q#
- $$v
ms.openlocfilehash: f1a7d1d041dab73980d8debc179d6c79acac6d33
ms.sourcegitcommit: 8256ff463eb9319f1933820a36c0838cf1e024e8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/17/2020
ms.locfileid: "90759794"
---
# <a name="chemistry-library-installation"></a><span data-ttu-id="83e8e-103">化學程式庫安裝</span><span class="sxs-lookup"><span data-stu-id="83e8e-103">Chemistry Library Installation</span></span>

<span data-ttu-id="83e8e-104">[ **MolecularHydrogen**範例](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/MolecularHydrogen)會使用手動設定的分子輸入資料。</span><span class="sxs-lookup"><span data-stu-id="83e8e-104">The [**MolecularHydrogen** sample](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/MolecularHydrogen) uses molecular input data that is manually configured.</span></span>
<span data-ttu-id="83e8e-105">雖然這適用于小型範例，但大規模的量子化學需要 Hamiltonian 上百萬或數十億個詞彙。</span><span class="sxs-lookup"><span data-stu-id="83e8e-105">While this is fine for small examples, quantum chemistry at scale requires Hamiltonians with millions or billions of terms.</span></span>
<span data-ttu-id="83e8e-106">可調整的計算化學套件所產生的這類 Hamiltonian 太大，無法以手動方式匯入。</span><span class="sxs-lookup"><span data-stu-id="83e8e-106">Such Hamiltonians, generated by scalable computational chemistry packages, are too large to import by hand.</span></span>

<span data-ttu-id="83e8e-107">量子開發工具組的量子化學程式庫是設計來與運算化學套件搭配使用，最值得注意的是， [**NWChem**](http://www.nwchem-sw.org/) 的計算化學平臺是由環境分子科學實驗室所開發 (EMSL 在太平洋西北部國內實驗室的) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-107">The quantum chemistry library for the Quantum Development Kit is designed to work well with computational chemistry packages, most notably the [**NWChem**](http://www.nwchem-sw.org/) computational chemistry platform developed by the Environmental Molecular Sciences Laboratory (EMSL) at Pacific Northwest National Laboratory.</span></span>
<span data-ttu-id="83e8e-108">尤其是，在[Broombridge 架構](xref:microsoft.quantum.libraries.chemistry.schema.broombridge)中， [ **Microsoft 量子化學**套件](https://www.nuget.org/packages/Microsoft.Quantum.Chemistry)提供載入量子化學模擬問題實例的工具，也支援最新的 NWChem 版本進行匯出。</span><span class="sxs-lookup"><span data-stu-id="83e8e-108">In particular, the [**Microsoft.Quantum.Chemistry** package](https://www.nuget.org/packages/Microsoft.Quantum.Chemistry) provides tools for loading instances of quantum chemistry simulation problems represented in the [Broombridge schema](xref:microsoft.quantum.libraries.chemistry.schema.broombridge), also supported for export by recent versions of NWChem.</span></span>

<span data-ttu-id="83e8e-109">量子開發工具組化學程式庫也提供命令列工具，可 `qdk-chem` 用於在舊版格式和 [Broombridge](xref:microsoft.quantum.libraries.chemistry.schema.broombridge)之間進行轉換。</span><span class="sxs-lookup"><span data-stu-id="83e8e-109">The Quantum Development Kit chemistry library also provides a command-line tool, `qdk-chem`, for converting between legacy formats and [Broombridge](xref:microsoft.quantum.libraries.chemistry.schema.broombridge).</span></span>

<span data-ttu-id="83e8e-110">本節將詳細說明如何使用 NWChem 和 Broombridge 的量子開發工具組，或舊版格式和 `qdk-chem` 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-110">This section details how to use the Quantum Development Kit with either NWChem and Broombridge, or legacy formats and `qdk-chem`.</span></span>

## <a name="using-the-quantum-development-kit-with-nwchem"></a><span data-ttu-id="83e8e-111">使用量子開發工具組搭配 NWChem</span><span class="sxs-lookup"><span data-stu-id="83e8e-111">Using the Quantum Development Kit with NWChem</span></span>

<span data-ttu-id="83e8e-112">若要使用 NWChem 搭配量子開發工具組來啟動並執行，請使用下列其中一種方法：</span><span class="sxs-lookup"><span data-stu-id="83e8e-112">To get up and running using NWChem together with the Quantum Development Kit, use one of the following methods:</span></span>

- <span data-ttu-id="83e8e-113">在 [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML)上使用範例中提供的現有 Broombridge 檔案開始使用。</span><span class="sxs-lookup"><span data-stu-id="83e8e-113">Get started using existing Broombridge files provided with the samples at [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML).</span></span>
- <span data-ttu-id="83e8e-114">使用 [Microsoft 量子開發工具組的 EMSL 箭](https://arrows.emsl.pnnl.gov/api/qsharp_chem) 號產生器（這是以 web 為基礎的前端來 NWChem），以產生新的 Broombridge 格式化分子輸入檔。</span><span class="sxs-lookup"><span data-stu-id="83e8e-114">Use the [EMSL Arrows Builder for the Microsoft Quantum Development Kit](https://arrows.emsl.pnnl.gov/api/qsharp_chem) which is a web-based frontend to NWChem, to generate new Broombridge-formated molecular input files.</span></span>  
- <span data-ttu-id="83e8e-115">使用 KRISHNAMOORTHY 提供的 [Docker 映射](https://hub.docker.com/r/nwchemorg/nwchem-qc/) 來執行 NWChem，或</span><span class="sxs-lookup"><span data-stu-id="83e8e-115">Use the [Docker image](https://hub.docker.com/r/nwchemorg/nwchem-qc/) provided by PNNL to run NWChem, or</span></span>
- <span data-ttu-id="83e8e-116">為您的平臺[編譯 NWChem](http://www.nwchem-sw.org/index.php/Compiling_NWChem) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-116">[Compile NWChem](http://www.nwchem-sw.org/index.php/Compiling_NWChem) for your platform.</span></span>

<span data-ttu-id="83e8e-117">如需有關如何使用 NWChem 與化學模型來分析量子 Developmen 套件化學程式庫的詳細資訊，請參閱 [使用 NWChem 的端對端](xref:microsoft.quantum.chemistry.examples.endtoend) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-117">See [End-to-end with NWChem](xref:microsoft.quantum.chemistry.examples.endtoend) for more information on how to work with NWChem to chemical models to analyze with the Quantum Developmen Kit chemistry library.</span></span>

### <a name="getting-started-using-broombridge-files-provided-with-the-samples"></a><span data-ttu-id="83e8e-118">開始使用範例中提供的 Broombridge 檔案</span><span class="sxs-lookup"><span data-stu-id="83e8e-118">Getting started using Broombridge files provided with the samples</span></span>

<span data-ttu-id="83e8e-119">量子開發工具組範例存放庫中的 [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML) 資料夾包含 Broombridge 格式化的分子資料檔案。</span><span class="sxs-lookup"><span data-stu-id="83e8e-119">The [IntegralData/YAML](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/IntegralData/YAML) folder in the Quantum Development Kit Samples repository contains Broombridge-formated molecule data files.</span></span>  

<span data-ttu-id="83e8e-120">簡單的範例，請使用化學程式庫範例 [GetGateCount](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/GetGateCount) ，從 Broombridge 檔的其中一個載入 Hamiltonian，並執行量子模擬 algorigthms 的閘道估計：</span><span class="sxs-lookup"><span data-stu-id="83e8e-120">As a simple example, use the chemistry library sample, [GetGateCount](https://github.com/microsoft/Quantum/tree/main/samples/chemistry/GetGateCount) to load the Hamiltonian from one of Broombridge files and perform gate estimates of quantum simulation algorigthms:</span></span>

```bash
cd Quantum/Chemistry/GetGateCount
dotnet run -- --path=../IntegralData/YAML/h2.yaml --format=YAML
```

<span data-ttu-id="83e8e-121">如需如何輸入 Broombridge 架構所代表之分子的詳細資訊，請參閱 [從檔案載入 Hamiltonian](xref:microsoft.quantum.chemistry.examples.loadhamiltonian) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-121">See [Loading a Hamiltonian from file](xref:microsoft.quantum.chemistry.examples.loadhamiltonian) for more information on how to input molecules represented by the Broombridge schema.</span></span>  

<span data-ttu-id="83e8e-122">如需資源估計的詳細資訊，請參閱 [取得資源計數](xref:microsoft.quantum.chemistry.examples.resourcecounts) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-122">See [Obtaining resource counts](xref:microsoft.quantum.chemistry.examples.resourcecounts) for more information on resource estimation.</span></span>  

### <a name="getting-started-using-the-emsl-arrows-builder"></a><span data-ttu-id="83e8e-123">開始使用 EMSL 箭號 Builder</span><span class="sxs-lookup"><span data-stu-id="83e8e-123">Getting started using the EMSL Arrows Builder</span></span>

<span data-ttu-id="83e8e-124">EMSL 箭號是使用 NWChem 和化學計算資料庫來產生分子資料的工具。</span><span class="sxs-lookup"><span data-stu-id="83e8e-124">EMSL Arrows is a tool that uses NWChem and chemical computational databases to generate molecule data.</span></span>  <span data-ttu-id="83e8e-125">[適用于 Microsoft 量子開發工具組的 EMSL 箭](https://arrows.emsl.pnnl.gov/api/qsharp_chem) 號產生器可讓您使用多個分子模型產生器來輸入您的模型，並產生量子開發工具組所要使用的 Broombridge 資料檔案。</span><span class="sxs-lookup"><span data-stu-id="83e8e-125">[EMSL Arrows Builder for the Microsoft Quantum Development Kit](https://arrows.emsl.pnnl.gov/api/qsharp_chem) allows you to enter your model using multiple molecular model builders and generate the Broombridge datafile to be used by the Quantum Development Kit.</span></span>  

<span data-ttu-id="83e8e-126">在 [EMSL] 頁面上，按一下 [' 指令 '] 索引標籤，然後依照 [' Simple 範例 '] 指示來產生 Broombridge 檔案。</span><span class="sxs-lookup"><span data-stu-id="83e8e-126">From the EMSL page, click on the ['Instuctions'] tab, and follow the ['Simple Examples'] instructions to generate Broombridge files.</span></span>  <span data-ttu-id="83e8e-127">然後嘗試執行 [' GetGateCount ']，以查看這些分子的量子資源預估值。</span><span class="sxs-lookup"><span data-stu-id="83e8e-127">Then try running the ['GetGateCount'] to see the quantum resource estimates for these molecules.</span></span>

### <a name="installing-nwchem-from-source"></a><span data-ttu-id="83e8e-128">從來源安裝 NWChem</span><span class="sxs-lookup"><span data-stu-id="83e8e-128">Installing NWChem from Source</span></span>

<span data-ttu-id="83e8e-129">[由 krishnamoorthy 提供](http://www.nwchem-sw.org/index.php/Compiling_NWChem)有關如何從來源安裝 NWChem 的完整指示。</span><span class="sxs-lookup"><span data-stu-id="83e8e-129">Full instructions on how to install NWChem from source [are provided by PNNL](http://www.nwchem-sw.org/index.php/Compiling_NWChem).</span></span>

> [!TIP]
> <span data-ttu-id="83e8e-130">如果您想要從 Windows 10 使用 NWChem，則 Windows 子系統 Linux 版是絕佳的選項。</span><span class="sxs-lookup"><span data-stu-id="83e8e-130">If you wish to use NWChem from Windows 10, the Windows Subsystem for Linux is a great option.</span></span>
> <span data-ttu-id="83e8e-131">安裝 [適用于 Windows 的 Ubuntu 18.04 LTS](https://www.microsoft.com/en-us/p/ubuntu-1804-lts/9n9tngvndl3q#activetab=pivot:overviewtab)之後，請 `ubuntu18.04` 從您最愛的終端機執行，並遵循上面的指示，從來源安裝 NWChem。</span><span class="sxs-lookup"><span data-stu-id="83e8e-131">Once you have installed [Ubuntu 18.04 LTS for Windows](https://www.microsoft.com/en-us/p/ubuntu-1804-lts/9n9tngvndl3q#activetab=pivot:overviewtab), run `ubuntu18.04` from your favorite terminal and follow the instructions above to install NWChem from source.</span></span>

<span data-ttu-id="83e8e-132">從來源編譯 NWChem 之後，您可以執行 `yaml_driver` NWChem 隨附的腳本，從 NWChem 輸入投影片快速產生 Broombridge 實例：</span><span class="sxs-lookup"><span data-stu-id="83e8e-132">Once you have compiled NWChem from source, you can run the `yaml_driver` script provided with NWChem to quickly produce Broombridge instances from NWChem input decks:</span></span>

```bash
$NWCHEM_TOP/contrib/quasar/yaml_driver input.nw
```

<span data-ttu-id="83e8e-133">此命令會 `input.yaml` 在您目前的目錄中建立 Broombridge 格式的新檔案。</span><span class="sxs-lookup"><span data-stu-id="83e8e-133">This command will create a new `input.yaml` file in the Broombridge format within your current directory.</span></span>

### <a name="using-nwchem-with-docker"></a><span data-ttu-id="83e8e-134">搭配使用 NWChem 與 Docker</span><span class="sxs-lookup"><span data-stu-id="83e8e-134">Using NWChem with Docker</span></span>

<span data-ttu-id="83e8e-135">使用 NWChem 的預先建立映射可透過 [Docker Hub](https://hub.docker.com)跨平臺使用。</span><span class="sxs-lookup"><span data-stu-id="83e8e-135">Pre-built images for using NWChem are available cross-platform via [Docker Hub](https://hub.docker.com).</span></span>
<span data-ttu-id="83e8e-136">若要開始使用，請遵循適用于您平臺的 Docker 安裝指示：</span><span class="sxs-lookup"><span data-stu-id="83e8e-136">To get started, follow the Docker installation instructions for your platform:</span></span>

- [<span data-ttu-id="83e8e-137">安裝適用于 Ubuntu 的 Docker</span><span class="sxs-lookup"><span data-stu-id="83e8e-137">Install Docker for Ubuntu</span></span>](https://docs.docker.com/install/linux/docker-ce/ubuntu/)
- [<span data-ttu-id="83e8e-138">安裝適用于 macOS 的 Docker</span><span class="sxs-lookup"><span data-stu-id="83e8e-138">Install Docker for macOS</span></span>](https://docs.docker.com/docker-for-mac/install/)
- [<span data-ttu-id="83e8e-139">安裝適用於 Windows 的 Docker 10</span><span class="sxs-lookup"><span data-stu-id="83e8e-139">Install Docker for Windows 10</span></span>](https://docs.docker.com/docker-for-windows/install/)

> [!TIP]
> <span data-ttu-id="83e8e-140">如果您使用適用於 Windows 的 Docker，就必須共用包含臨時目錄的磁片磁碟機 (這通常是 `C:\` 使用 Docker daemon) 的磁片磁碟機。</span><span class="sxs-lookup"><span data-stu-id="83e8e-140">If you are using Docker for Windows, you will need to share the drive containing your temporary directory (usually this is the `C:\` drive) with the Docker daemon.</span></span> <span data-ttu-id="83e8e-141">如需詳細資訊，請參閱 [Docker 檔](https://docs.docker.com/docker-for-windows/#shared-drives) 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-141">See the [Docker documentation](https://docs.docker.com/docker-for-windows/#shared-drives) for more details.</span></span>

<span data-ttu-id="83e8e-142">安裝 Docker 之後，您可以使用隨附于量子開發工具組範例的 PowerShell 模組來執行映射，也可以手動執行映射。</span><span class="sxs-lookup"><span data-stu-id="83e8e-142">Once you have Docker installed, you can either use the PowerShell module provided with the Quantum Development Kit samples to run the image, or you can run the image manually.</span></span>
<span data-ttu-id="83e8e-143">我們將在此詳細說明如何使用 PowerShell;如果您想要手動使用 Docker 映射，請參閱 [映射所提供的檔](https://hub.docker.com/r/nwchemorg/nwchem-qc/)。</span><span class="sxs-lookup"><span data-stu-id="83e8e-143">We detail using PowerShell here; if you would like to use the Docker image manually, please see the [documentation provided with the image](https://hub.docker.com/r/nwchemorg/nwchem-qc/).</span></span>

#### <a name="running-nwchem-through-powershell-core"></a><span data-ttu-id="83e8e-144">正在執行 NWChem 至 PowerShell Core</span><span class="sxs-lookup"><span data-stu-id="83e8e-144">Running NWChem through PowerShell Core</span></span>

<span data-ttu-id="83e8e-145">為了搭配使用 NWChem Docker 映射與量子開發工具組，我們提供了一個小型的 PowerShell 模組，可處理移入和移出 NWChem 的檔案。</span><span class="sxs-lookup"><span data-stu-id="83e8e-145">To use the NWChem Docker image with the Quantum Development Kit, we provide a small PowerShell module that handles moving files in and out of NWChem for you.</span></span>
<span data-ttu-id="83e8e-146">如果您還沒有安裝 PowerShell Core，可以從 [GitHub 上的 PowerShell 存放庫](https://github.com/PowerShell/PowerShell#get-powershell)下載跨平臺。</span><span class="sxs-lookup"><span data-stu-id="83e8e-146">If you don't already have PowerShell Core installed, you can download it cross-platform from the [PowerShell repository on GitHub](https://github.com/PowerShell/PowerShell#get-powershell).</span></span>

> [!NOTE]
> <span data-ttu-id="83e8e-147">PowerShell Core 也會用於一些範例，以示範與資料科學和商務分析工作流程之間的互通性。</span><span class="sxs-lookup"><span data-stu-id="83e8e-147">PowerShell Core is also used for some samples to demonstrate interoperability with data science and business analytics workflows.</span></span>

<span data-ttu-id="83e8e-148">安裝 PowerShell Core 之後，請匯入 `InvokeNWChem.psm1` 以使 NWChem 命令可在目前的會話中使用：</span><span class="sxs-lookup"><span data-stu-id="83e8e-148">Once you have PowerShell Core installed, import `InvokeNWChem.psm1` to make NWChem commands available in your current session:</span></span>

```powershell
cd Quantum/utilities/
Import-Module ./InvokeNWChem.psm1
```

<span data-ttu-id="83e8e-149">這會讓 `Convert-NWChemToBroombridge` 命令可在您目前的 PowerShell 會話中使用。</span><span class="sxs-lookup"><span data-stu-id="83e8e-149">This will make the `Convert-NWChemToBroombridge` command available in your current PowerShell session.</span></span>
<span data-ttu-id="83e8e-150">若要從 Docker 下載任何所需的映射，並使用它們來執行 NWChem 輸入投影片並將輸出捕獲到 Broombridge，請執行下列動作：</span><span class="sxs-lookup"><span data-stu-id="83e8e-150">To download any needed images from Docker and use them to run NWChem input decks and capture output to Broombridge, run the following:</span></span>

```powershell
Convert-NWChemToBroombridge ./input.nw
```

<span data-ttu-id="83e8e-151">這會藉由在上執行 NWChem 來建立 Broombridge 檔 `input.nw` 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-151">This will create a Broombridge file by running NWChem on `input.nw`.</span></span>
<span data-ttu-id="83e8e-152">根據預設，Broombridge 輸出的名稱和路徑會與輸入組的名稱和路徑相同，並以 `.nw` 取代的副檔名取代 `.yaml` 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-152">By default, the Broombridge output will have the same name and path as the input deck, with the `.nw` extension replaced by `.yaml`.</span></span>
<span data-ttu-id="83e8e-153">這可以透過使用 `-DestinationPath` 參數來覆寫 `Convert-NWChemToBroombridge` 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-153">This can be overridden by using the `-DestinationPath` parameter to `Convert-NWChemToBroombridge`.</span></span>
<span data-ttu-id="83e8e-154">您可以使用 PowerShell 的內建說明功能來取得詳細資訊：</span><span class="sxs-lookup"><span data-stu-id="83e8e-154">More information can be obtained by using PowerShell's built-in help functionality:</span></span>

```powershell
Convert-NWChemToBroombridge -?
Get-Help Convert-NWChemToBroombridge -Full
```

## <a name="using-the-quantum-development-kit-with-qdk-chem"></a><span data-ttu-id="83e8e-155">使用量子開發工具組搭配 `qdk-chem`</span><span class="sxs-lookup"><span data-stu-id="83e8e-155">Using the Quantum Development Kit with `qdk-chem`</span></span>

<span data-ttu-id="83e8e-156">若要安裝 `qdk-chem` ，您可以在命令列使用 .NET Core SDK：</span><span class="sxs-lookup"><span data-stu-id="83e8e-156">To install `qdk-chem`, you can use the .NET Core SDK at the command line:</span></span>

```dotnetcli
dotnet tool install --global Microsoft.Quantum.Chemistry.Tools
```

<span data-ttu-id="83e8e-157">安裝之後 `qdk-chem` ，您可以使用 `--help` 選項來取得工具所提供功能的更多詳細資料 `qdk-chem` 。</span><span class="sxs-lookup"><span data-stu-id="83e8e-157">Once you have installed `qdk-chem`, you can use the `--help` option to get more details about the functionality offered by the `qdk-chem` tool.</span></span>

<span data-ttu-id="83e8e-158">若要在 Broombridge 之間轉換，您可以使用 `qdk-chem convert` 下列命令：</span><span class="sxs-lookup"><span data-stu-id="83e8e-158">To convert to and from Broombridge, you can use the `qdk-chem convert` command:</span></span>

```
qdk-chem convert --from fcidump --to broombridge data.fcidump --out data.yml
```

<span data-ttu-id="83e8e-159">此 `qdk-chem convert` 命令也可以接受來自標準輸入的資料，並且可以寫入標準輸出; 這在腳本中特別有用，而且可與匯出為舊版格式的工具整合。</span><span class="sxs-lookup"><span data-stu-id="83e8e-159">The `qdk-chem convert` command can also accept its data from standard input, and can write to standard output; this is especially useful within scripts and for integrating with tools that export to legacy formats.</span></span>
<span data-ttu-id="83e8e-160">例如，在 Bash 中：</span><span class="sxs-lookup"><span data-stu-id="83e8e-160">For example, in Bash:</span></span>

```bash
cat data.fcidump | qdk-convert --from fcidump --to broombridge - > data.yml
```
